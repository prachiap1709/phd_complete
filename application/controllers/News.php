<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class News extends CI_Controller {	function __construct() {        parent::__construct();		error_reporting(0);		$this->load->model('news_model');		$this->load->library('Mandrill_Api');    }		public function index()	{		if($this->session->userdata('adm_logged_in') == true && $this->session->userdata('adm_admin_type') == 'SUPERADMIN')		{			$data['module'] = 'news';			$data['result'] = $this->news_model->viewrecord('');						$data['mtitle'] =  'Manage News - '.WEBNAME;			$data['main_content'] = 'news/index';			$this->load->view('common/template.php',$data);		}		else		{			redirect(base_url());		}	}		public function add()	{		if($this->session->userdata('adm_logged_in') == true && $this->session->userdata('adm_admin_type') == 'SUPERADMIN')		{			$data['module'] = 'news';						$data['mtitle'] =  'Add News - '.WEBNAME;						$user_type = $this->uri->segment(3);			$data['user_type'] =  $user_type;						$data['main_content'] = 'news/add';			$this->load->view('common/template.php',$data);		}		else		{			redirect(base_url());		}	}		public function insertnews()	{		if($this->session->userdata('adm_logged_in') == true && $this->session->userdata('adm_admin_type') == 'SUPERADMIN')		{						$title 			= $this->input->post('title');			$news_date 		= $this->input->post('news_date');			$description 	= $this->input->post('description');			$data = array(				'fld_title'			=>	$title,				'fld_news_date'		=>	date('Y-m-d',strtotime($news_date)),				'fld_description'	=>	$description,				'fld_addedon'		=>	date('Y-m-d')			);						$insertid = $this->news_model->insertnews($data,$title);			if($insertid>0)			{								$this->session->set_userdata('alert_type', 'success');				$this->session->set_userdata('msg', 'News Info. Added Successfully');								redirect(base_url().'news');			}			else			{								$this->session->set_userdata('alert_type', 'danger');				$this->session->set_userdata('msg', 'News Already Exist!');				redirect(base_url().'news');			}		}		else		{			redirect(base_url());		}	}		public function edit()	{		if($this->session->userdata('adm_logged_in') == true && $this->session->userdata('adm_admin_type') == 'SUPERADMIN')		{			$newsid = $this->uri->segment(3);						$data['module'] = 'news';			$data['newsid'] = $newsid;			$data['result'] = $this->news_model->viewrecord($newsid);			$data['mtitle'] =  'Edit News - '.WEBNAME;			$data['main_content'] = 'news/edit';			$this->load->view('common/template.php',$data);		}		else		{			redirect(base_url());		}	}		public function updatenews()	{		if($this->session->userdata('adm_logged_in') == true && $this->session->userdata('adm_admin_type') == 'SUPERADMIN')		{			$newsid 		= $this->input->post('newsid');			$title 			= $this->input->post('title');			$news_date 		= $this->input->post('news_date');			$description 	= $this->input->post('description');			$data = array(				'fld_title'			=>	$title,				'fld_news_date'		=>	date('Y-m-d',strtotime($news_date)),				'fld_description'	=>	$description			);			$result = $this->news_model->updatenews($data,$newsid);						if($result>0)			{								$this->session->set_userdata('alert_type', 'success');				$this->session->set_userdata('msg', 'News Updated Successfully');				redirect(base_url().'news');			}			else			{				$this->session->set_userdata('alert_type', 'danger');				$this->session->set_userdata('msg', 'News Not Updated!');				redirect(base_url().'news');			}		}		else		{			redirect(base_url());		}	}	public function deletenews()	{		if($this->session->userdata('adm_logged_in') == true && $this->session->userdata('adm_admin_type') == 'SUPERADMIN')		{			$newsid = $this->uri->segment(3);						$result = $this->news_model->deletenews($newsid);			if($result>0)			{				$this->session->set_userdata('alert_type', 'success');				$this->session->set_userdata('msg', 'News Deleted Successfully');				redirect(base_url().'news');			}			else			{				$this->session->set_userdata('alert_type', 'danger');				$this->session->set_userdata('msg', 'News Not Deleted !');				redirect(base_url().'news');			}		}		else		{			redirect(base_url());		}	}}